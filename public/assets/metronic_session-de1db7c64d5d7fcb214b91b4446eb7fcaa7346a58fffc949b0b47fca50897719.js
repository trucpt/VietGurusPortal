var Login=function(){var r=function(){$(".login-form").validate({errorElement:"span",errorClass:"help-block",focusInvalid:!1,rules:{email:{required:!0},password:{required:!0},remember:{required:!1}},messages:{username:{required:"Email is required."},password:{required:"Password is required."}},invalidHandler:function(){$(".alert-danger",$(".login-form")).show()},highlight:function(r){$(r).closest(".form-group").addClass("has-error")},success:function(r){r.closest(".form-group").removeClass("has-error"),r.remove()},errorPlacement:function(r,e){r.insertAfter(e.closest(".input-icon"))},submitHandler:function(r){r.submit()}}),$(".login-form input").keypress(function(r){return 13==r.which?($(".login-form").validate().form()&&$(".login-form").submit(),!1):void 0})},e=function(){$(".forget-form").validate({errorElement:"span",errorClass:"help-block",focusInvalid:!1,ignore:"",rules:{email:{required:!0,email:!0}},messages:{email:{required:"Email is required."}},invalidHandler:function(){},highlight:function(r){$(r).closest(".form-group").addClass("has-error")},success:function(r){r.closest(".form-group").removeClass("has-error"),r.remove()},errorPlacement:function(r,e){r.insertAfter(e.closest(".input-icon"))},submitHandler:function(r){r.submit()}}),$(".forget-form input").keypress(function(r){return 13==r.which?($(".forget-form").validate().form()&&$(".forget-form").submit(),!1):void 0}),jQuery("#forget-password").click(function(){jQuery(".login-form").hide(),jQuery(".forget-form").show()}),jQuery("#back-btn").click(function(){jQuery(".login-form").show(),jQuery(".forget-form").hide()})},o=function(){$(".new-forget-form").validate({errorElement:"span",errorClass:"help-block",focusInvalid:!1,rules:{new_password:{required:!0},new_password_confirmation:{required:!0,equalTo:"#new_password"}},messages:{new_password:{required:"Password is required."},new_password_confirmation:{required:"Password confirmation is required."}},invalidHandler:function(){$(".alert-danger",$(".new-forget-form")).show()},highlight:function(r){$(r).closest(".new-forget-form").addClass("has-error")},success:function(r){r.closest(".new-forget-form").removeClass("has-error"),r.remove()},errorPlacement:function(r,e){r.insertAfter(e.closest(".input-icon"))},submitHandler:function(r){$("#token").val(getUrlParameter("auth_token")),r.submit()}}),$(".new-forget-form input").keypress(function(r){return 13==r.which?($(".new-forget-form").validate().form()&&($("#token").val(getUrlParameter("auth_token")),$(".new-forget-form").submit()),!1):void 0})},i=function(){$(".register-form").validate({errorElement:"span",errorClass:"help-block",focusInvalid:!1,ignore:"",rules:{"user[name]":{required:!0},"user[email]":{required:!0,email:!0},"user[password]":{required:!0},rpassword:{equalTo:"#user_password"}},invalidHandler:function(){},highlight:function(r){$(r).closest(".form-group").addClass("has-error")},success:function(r){r.closest(".form-group").removeClass("has-error"),r.remove()},errorPlacement:function(r,e){"tnc"==e.attr("name")?r.insertAfter($("#register_tnc_error")):1===e.closest(".input-icon").size()?r.insertAfter(e.closest(".input-icon")):r.insertAfter(e)},submitHandler:function(r){r.submit()}}),$(".register-form input").keypress(function(r){return 13==r.which?($(".register-form").validate().form()&&$(".register-form").submit(),!1):void 0}),jQuery("#register-btn").click(function(){jQuery(".login-form").hide(),jQuery(".register-form").show()}),jQuery("#register-back-btn").click(function(){jQuery(".login-form").show(),jQuery(".register-form").hide()})};return{init:function(){r(),e(),o(),i(),$.backstretch(["/images/1.jpg","/images/2.jpg","/images/3.jpg","/images/4.jpg"],{fade:1e3,duration:8e3});var s=getUrlParameter("type");"reset-password"==s?(jQuery(".login-form").hide(),jQuery(".register-form").hide(),jQuery(".new-forget-form").hide(),jQuery(".forget-form").show()):"new-password"==s&&(jQuery(".login-form").hide(),jQuery(".register-form").hide(),jQuery(".forget-form").hide(),jQuery(".new-forget-form").show())}}}();jQuery(document).ready(function(){Login.init()});var getUrlParameter=function(r){var e,o,i=decodeURIComponent(window.location.search.substring(1)),s=i.split("&");for(o=0;o<s.length;o++)if(e=s[o].split("="),e[0]===r)return void 0===e[1]?!0:e[1]};